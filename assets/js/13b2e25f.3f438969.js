"use strict";(globalThis.webpackChunkagrono_docs=globalThis.webpackChunkagrono_docs||[]).push([[9711],{2569(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"server-api","title":"API do Servidor AgroN\xf3","description":"Servidor API","source":"@site/docs/server-api.md","sourceDirName":".","slug":"/server-api","permalink":"/AgroNo/docs/server-api","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Gateway AgroN\xf3","permalink":"/AgroNo/docs/gateway"},"next":{"title":"Guia de Desenvolvimento - GitHub Flow","permalink":"/AgroNo/docs/development"}}');var a=r(4848),i=r(8453);const d={},o="API do Servidor AgroN\xf3",l={},t=[{value:"Arquitetura",id:"arquitetura",level:2},{value:"Tecnologias",id:"tecnologias",level:2},{value:"Endpoints Principais",id:"endpoints-principais",level:2},{value:"POST /api/dados",id:"post-apidados",level:3},{value:"GET /api/nodes",id:"get-apinodes",level:3},{value:"<code>GET /api/dados/{node_id}</code>",id:"get-apidadosnode_id",level:3},{value:"GET /api/dashboard/summary",id:"get-apidashboardsummary",level:3},{value:"Processamento de Dados",id:"processamento-de-dados",level:2},{value:"Valida\xe7\xe3o",id:"valida\xe7\xe3o",level:3},{value:"Agrega\xe7\xe3o",id:"agrega\xe7\xe3o",level:3},{value:"Armazenamento",id:"armazenamento",level:3},{value:"Seguran\xe7a",id:"seguran\xe7a",level:2},{value:"Escalabilidade",id:"escalabilidade",level:2},{value:"Monitoramento",id:"monitoramento",level:2},{value:"Pr\xf3ximos Passos",id:"pr\xf3ximos-passos",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"api-do-servidor-agron\xf3",children:"API do Servidor AgroN\xf3"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"/AgroNo/img/server-api.svg",alt:"Servidor API"})}),"\n",(0,a.jsx)(n.p,{children:"A API do servidor AgroN\xf3 recebe dados dos gateways, processa, armazena e fornece endpoints para dashboards e relat\xf3rios."}),"\n",(0,a.jsx)(n.h2,{id:"arquitetura",children:"Arquitetura"}),"\n",(0,a.jsx)(n.mermaid,{value:"graph TD\r\n    A[Gateway] --\x3e|POST /api/dados| B[API Server]\r\n    B --\x3e C[Valida\xe7\xe3o]\r\n    C --\x3e D[Processamento]\r\n    D --\x3e E[Banco de Dados]\r\n    E --\x3e F[Dashboards]\r\n    F --\x3e G[Usu\xe1rio]"}),"\n",(0,a.jsx)(n.h2,{id:"tecnologias",children:"Tecnologias"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Framework"}),": Node.js + Express ou Python + FastAPI"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Banco de Dados"}),": PostgreSQL ou MongoDB"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Autentica\xe7\xe3o"}),": JWT"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Documenta\xe7\xe3o"}),": Swagger/OpenAPI"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"endpoints-principais",children:"Endpoints Principais"}),"\n",(0,a.jsx)(n.h3,{id:"post-apidados",children:"POST /api/dados"}),"\n",(0,a.jsx)(n.p,{children:"Recebe dados dos n\xf3s via gateway."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Autentica\xe7\xe3o:"})," Bearer Token do gateway"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Corpo da Requisi\xe7\xe3o:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "node_id": "MET_01",\r\n  "tipo": "meteorologia",\r\n  "temperatura": 25.5,\r\n  "umidade": 65.2,\r\n  "pressao": 1013.25,\r\n  "vento": 12.5,\r\n  "chuva": 0.0,\r\n  "timestamp": "2025-12-28T10:00:00",\r\n  "sync": false\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Resposta:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "status": "success",\r\n  "id": 12345,\r\n  "message": "Dados armazenados com sucesso"\r\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"get-apinodes",children:"GET /api/nodes"}),"\n",(0,a.jsx)(n.p,{children:"Lista todos os n\xf3s registrados."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Resposta:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'[\r\n  {\r\n    "node_id": "MET_01",\r\n    "tipo": "meteorologia",\r\n    "localizacao": "Campo A",\r\n    "ultimo_contato": "2025-12-28T10:00:00",\r\n    "status": "online"\r\n  }\r\n]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"get-apidadosnode_id",children:(0,a.jsx)(n.code,{children:"GET /api/dados/{node_id}"})}),"\n",(0,a.jsx)(n.p,{children:"Obt\xe9m dados hist\xf3ricos de um n\xf3."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Par\xe2metros de Query:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"start_date: Data inicial (YYYY-MM-DD)"}),"\n",(0,a.jsx)(n.li,{children:"end_date: Data final (YYYY-MM-DD)"}),"\n",(0,a.jsx)(n.li,{children:"limit: N\xfamero m\xe1ximo de registros"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Resposta:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "node_id": "MET_01",\r\n  "tipo": "meteorologia",\r\n  "dados": [\r\n    {\r\n      "timestamp": "2025-12-28T10:00:00",\r\n      "temperatura": 25.5,\r\n      "umidade": 65.2\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"get-apidashboardsummary",children:"GET /api/dashboard/summary"}),"\n",(0,a.jsx)(n.p,{children:"Resumo para dashboard principal."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Resposta:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "total_nodes": 15,\r\n  "nodes_online": 12,\r\n  "alertas": [\r\n    {\r\n      "tipo": "umidade_solo_baixa",\r\n      "node_id": "SOL_01",\r\n      "mensagem": "Umidade do solo abaixo de 30%"\r\n    }\r\n  ],\r\n  "metricas": {\r\n    "temperatura_media": 24.5,\r\n    "umidade_media": 62.3,\r\n    "precipitacao_total": 15.2\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"processamento-de-dados",children:"Processamento de Dados"}),"\n",(0,a.jsx)(n.h3,{id:"valida\xe7\xe3o",children:"Valida\xe7\xe3o"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Verificar campos obrigat\xf3rios"}),"\n",(0,a.jsx)(n.li,{children:"Validar tipos de dados"}),"\n",(0,a.jsx)(n.li,{children:"Verificar ranges realistas"}),"\n",(0,a.jsx)(n.li,{children:"Detectar dados duplicados"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"agrega\xe7\xe3o",children:"Agrega\xe7\xe3o"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"M\xe9dias hor\xe1rias/di\xe1rias"}),"\n",(0,a.jsx)(n.li,{children:"Tend\xeancias"}),"\n",(0,a.jsx)(n.li,{children:"Alertas baseados em thresholds"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"armazenamento",children:"Armazenamento"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE dados (\r\n    id SERIAL PRIMARY KEY,\r\n    node_id VARCHAR(50),\r\n    tipo VARCHAR(50),\r\n    dados JSONB,\r\n    timestamp TIMESTAMP,\r\n    criado_em TIMESTAMP DEFAULT NOW()\r\n);\r\n\r\nCREATE TABLE nodes (\r\n    node_id VARCHAR(50) PRIMARY KEY,\r\n    tipo VARCHAR(50),\r\n    localizacao VARCHAR(100),\r\n    configuracao JSONB,\r\n    ultimo_contato TIMESTAMP,\r\n    status VARCHAR(20)\r\n);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"seguran\xe7a",children:"Seguran\xe7a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"HTTPS"}),": Obrigat\xf3rio em produ\xe7\xe3o"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Autentica\xe7\xe3o"}),": Tokens JWT para gateways"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Rate Limiting"}),": Preven\xe7\xe3o de abuso"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Logs"}),": Auditoria de todas as opera\xe7\xf5es"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Backup"}),": Estrat\xe9gia de backup di\xe1rio"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"escalabilidade",children:"Escalabilidade"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Cache"}),": Redis para dados frequentes"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Fila"}),": RabbitMQ para processamento ass\xedncrono"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Load Balancer"}),": Distribui\xe7\xe3o de carga"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Microservi\xe7os"}),": Separa\xe7\xe3o por dom\xednio (dados, alertas, relat\xf3rios)"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"monitoramento",children:"Monitoramento"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"M\xe9tricas"}),": Response times, error rates"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Logs"}),": Centralizados com ELK stack"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Alertas"}),": Notifica\xe7\xf5es autom\xe1ticas"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Health Checks"}),": Endpoints de sa\xfade"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"pr\xf3ximos-passos",children:"Pr\xf3ximos Passos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Implementar WebSockets para dados em tempo real"}),"\n",(0,a.jsx)(n.li,{children:"Adicionar machine learning para previs\xf5es"}),"\n",(0,a.jsx)(n.li,{children:"API para integra\xe7\xe3o com sistemas externos"}),"\n",(0,a.jsx)(n.li,{children:"Documenta\xe7\xe3o interativa com Swagger"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);